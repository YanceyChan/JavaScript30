<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Key Detection</title>
  <script type="text/javascript" src="http://www.cornify.com/js/cornify.js"></script>
</head>

<body>

  <div style="font-size:20px;color:green">请输入:liyc</div>

  <div style="font-size:40px;color:red" class="input_word_pre"></div>
  <div style="font-size:40px;color:blue" class="input_word_af"></div>
  <script>
    //空数组，装填入的字母
    const pressed = [];
    //要输入的正确序列
    const secretCode = 'liyc';

    const input_word_pre = document.querySelector('.input_word_pre');
    const input_word_af = document.querySelector('.input_word_af');

    window.addEventListener('keyup', (e) => {
      const regex = new RegExp('[A-z]', 'gi');
      //判断输入是否符合上面的正则
      if (e.key.length === 1 && e.key.match(regex)) {
        //插入数组元素
        pressed.push(e.key);
        // join将数组元素按’‘拼接成字符串
        input_word_pre.innerText = pressed.join('');
        //splice 从0开始删除pressed.length - secretCode.length的长度的元素。实际效果就是当长度超出secretCode后，删除数组的第一个元素。第二参数为负数时不进行操作
        pressed.splice(0, pressed.length - secretCode.length);
        input_word_af.innerText = pressed.join('');
        //判断pressed是否包含cecretCode
        if (pressed.join('').includes(secretCode)) {
          console.log('DING DING!');
        //   调用上面js的函数。
          cornify_add();
          // alert(secretCode);
        }
      }
    });
  </script>
</body>

</html>
